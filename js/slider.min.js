var sliderClass=function(a,b){var c=$(a),d=c.find(".jslider-item"),e=d.length,f={current_index:0,prev_index:e-1,next_index:1},g=$.extend({},$.fn.jslider.defaults,b,f);c.outerHeight(g.height),c.css("max-width",g.width);var h=(c.outerHeight(),c.outerWidth());h<=g.width?aspectRatio_offset=h/g.width:aspectRatio_offset=1,new_height=aspectRatio_offset*g.height,c.outerHeight(new_height),whichTransitionEvent=function(){var a,b=document.createElement("fakeelement"),c={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a]},transitionEvent=whichTransitionEvent(),$(".jslider_controls",c).remove();var i='<div class="jslider_controls">';d.each(function(a){i+=0===a?'<div class="j_dots active" data-j_index='+a+"></div>":'<div class="j_dots" data-j_index='+a+"></div>"}),i+="</div>",c.append(i),$(".j_dots",c).on("click",function(){$(this).hasClass("active")||(g.old_index=$(".current",c).index(),remove_old_navigation_classes(g,d),g.current_index=parseInt($(this).data("j_index")),g.prev_index=(g.current_index+e-1)%e,g.next_index=(g.current_index+1)%e,g.direction="controls",j(g,d))}),apply_new_navigation_classes=function(a,b){var c=b.parent();b.eq(a.current_index).addClass("current"),b.eq(a.prev_index).addClass("prev"),b.eq(a.next_index).addClass("next"),$(".j_dots",c).eq(a.current_index).addClass("active")},remove_old_navigation_classes=function(a,b){var c=b.parent();b.eq(a.current_index).removeClass("current"),b.eq(a.prev_index).removeClass("prev"),b.eq(a.next_index).removeClass("next"),$(".j_dots",c).filter(".active").removeClass("active")};var j=function(a,b){a.animating_state?console.log("already animation is running"):$.fn.jslider.animationEffects[a.effect](a,b)};update_index_for_next=function(a,b){var c=b.length;a.current_index=(a.current_index+1)%c,a.prev_index=(a.prev_index+1)%c,a.next_index=(a.next_index+1)%c},update_index_for_prev=function(a,b){var c=b.length;a.current_index=(a.current_index+c-1)%c,a.prev_index=(a.prev_index+c-1)%c,a.next_index=(a.next_index+c-1)%c},show_current_item_only=function(a,b){b.eq(a.current_index).show(),b.eq(a.prev_index).hide(),b.eq(a.next_index).hide()};var k=function(a,b){a.animating_state||(remove_old_navigation_classes(a,b),a.direction="prev",j(a,b))},l=function(a,b){a.animating_state||(remove_old_navigation_classes(a,b),a.direction="next",j(a,b))};remove_old_navigation_classes(g,d),apply_new_navigation_classes(g,d),d.each(function(a){a==g.current_index?$(this).show():$(this).hide()}),$("a.arrow-left",c).on("click",function(a){a.preventDefault(),k(g,d)}),$("a.arrow-right",c).on("click",function(a){a.preventDefault(),l(g,d)}),$(window).resize(function(){var a=(c.outerHeight(),c.outerWidth());a<=g.width?aspectRatio_offset=a/g.width:aspectRatio_offset=1,new_height=aspectRatio_offset*g.height,c.outerHeight(new_height)}),c.on({mouseenter:function(){g.automatic&&clearInterval(g.automatic_ID)},mouseleave:function(){g.automatic&&(g.automatic_ID=setInterval(function(){l()},5e3))}},".current")};$.fn.jslider=function(a){return this.each(function(b,c){sliderClass(c,a)})},$.fn.jslider.defaults={animating_state:!1,automatic:!1,effect:"fade",direction:"",duration:500,responsive:!1,width:600,height:450,offset:10},$.fn.jslider.animationEffects={fade:function(a,b){a.animating_state=!0,"prev"==a.direction&&update_index_for_prev(a,b),"next"==a.direction&&update_index_for_next(a,b),apply_new_navigation_classes(a,b),b.eq(a.prev_index).hide(),b.eq(a.next_index).hide(),b.eq(a.current_index).fadeIn(a.duration,function(){a.animating_state=!1})},book_open:function(a,b){$slider=b.parent();var c=$slider.outerHeight(),d=$slider.outerWidth();a.animating_state=!0;for(var e=a.effect+"-",f=b.eq(a.prev_index),g=b.eq(a.current_index),h=b.eq(a.next_index),i=d/2,j=c,k=[],l=[],m=0;m<2;m++){var n={};n.x=m*i,n.y=0*j,l.push(n),k.push(n)}"next"==a.direction&&($original_item=g,$new_item=h),"prev"==a.direction&&($original_item=g,$new_item=f),"controls"==a.direction&&($original_item=b.eq(a.old_index),$new_item=b.eq(a.current_index));var o=$original_item.find("img").attr("src"),p=$new_item.find("img").attr("src");k.forEach(function(a,b){var f=document.createElement("div");f.className=e+"new-part ",f.className+="new-part-no-"+b,f.style.cssText="background:url('"+p+"'); top:"+a.y+"px; left:"+a.x+"px;",f.style.backgroundPosition=a.x+"px "+a.y+"px",f.style.backgroundSize=d+"px "+c+"px",f.style.width=i+"px",f.style.height=j+"px",0===b?(f.classList.add(e+"new-part-page1-ani-before"),f.classList.add("border-tl"),f.classList.add("border-bl")):(f.classList.add(e+"new-part-page2-ani-before"),f.classList.add("border-tr"),f.classList.add("border-br")),$original_item.append(f)}),setTimeout(function(){$(".new-part-no-0",$slider).addClass(e+"new-part-page1-ani-after"),$(".new-part-no-1",$slider).addClass(e+"new-part-page2-ani-after"),console.log("doing animation");var c=0;$original_item.one(transitionEvent,function(d){++c,$(this).empty(),$(this).append("<img src='"+o+"' alt='' />"),console.log("animation over"+c),a.animating_state=!1,"prev"==a.direction&&(update_index_for_prev(a,b),show_current_item_only(a,b),apply_new_navigation_classes(a,b)),"next"==a.direction&&(update_index_for_next(a,b),show_current_item_only(a,b),apply_new_navigation_classes(a,b)),"controls"==a.direction&&(show_current_item_only(a,b),apply_new_navigation_classes(a,b))})},300)},book_close:function(a,b){$slider=b.parent();var c=$slider.outerHeight(),d=$slider.outerWidth();a.animating_state=!0;for(var e=a.effect+"-",f=b.eq(a.prev_index),g=b.eq(a.current_index),h=b.eq(a.next_index),i=d/2,j=c,k=[],l=[],m=0;m<2;m++){var n={};n.x=m*i,n.y=0*j,l.push(n),k.push(n)}"next"==a.direction&&($original_item=g,$new_item=h),"prev"==a.direction&&($original_item=g,$new_item=f),"controls"==a.direction&&($original_item=b.eq(a.old_index),$new_item=b.eq(a.current_index));var o=$original_item.find("img").attr("src"),p=$new_item.find("img").attr("src");$original_item.empty(),$original_item.append("<img src='"+p+"' alt='' />"),l.forEach(function(a,b){var f=document.createElement("div");f.className=e+"old-part ",f.className+="old-part-no-"+b,0==b?(f.classList.add("border-tl"),f.classList.add("border-bl")):(f.classList.add("border-tr"),f.classList.add("border-br")),f.style.cssText="background:url('"+o+"'); top:"+a.y+"px; left:"+a.x+"px;",f.style.backgroundPosition=a.x+"px "+a.y+"px",f.style.backgroundSize=d+"px "+c+"px",f.style.width=i+"px",f.style.height=j+"px",$original_item.append(f)}),setTimeout(function(){$(".old-part-no-0",$slider).addClass(e+"old-part-page1-ani-after"),$(".old-part-no-1",$slider).addClass(e+"old-part-page2-ani-after"),console.log("doing animation");var c=0;$original_item.one(transitionEvent,function(d){++c,$(this).empty(),$(this).append("<img src='"+o+"' alt='' />"),$new_item.empty(),$new_item.append("<img src='"+p+"' alt='' />"),console.log("animation over"+c),a.animating_state=!1,"prev"==a.direction&&(update_index_for_prev(a,b),show_current_item_only(a,b),apply_new_navigation_classes(a,b)),"next"==a.direction&&(update_index_for_next(a,b),show_current_item_only(a,b),apply_new_navigation_classes(a,b)),"controls"==a.direction&&(show_current_item_only(a,b),apply_new_navigation_classes(a,b))})},300)},book_turn:function(a,b){$slider=b.parent();var c=$slider.outerHeight(),d=$slider.outerWidth();a.animating_state=!0;for(var e=a.effect+"-",f=b.eq(a.prev_index),g=b.eq(a.current_index),h=b.eq(a.next_index),i=d/2,j=c,k=[],l=[],m=0;m<2;m++){var n={};n.x=m*i,n.y=0*j,l.push(n),k.push(n)}"next"==a.direction&&($original_item=g,$new_item=h),"prev"==a.direction&&($original_item=g,$new_item=f),"controls"==a.direction&&($original_item=b.eq(a.old_index),$new_item=b.eq(a.current_index));var o=$original_item.find("img").attr("src");$original_item.empty(),l.forEach(function(a,b){var f=document.createElement("div");f.className=e+"old-part ",f.className+="old-part-no-"+b,0==b?(f.classList.add("border-tl"),f.classList.add("border-bl")):(f.classList.add("border-tr"),f.classList.add("border-br")),f.style.cssText="background:url('"+o+"'); top:"+a.y+"px; left:"+a.x+"px;",f.style.backgroundPosition=a.x+"px "+a.y+"px",f.style.backgroundSize=d+"px "+c+"px",f.style.width=i+"px",f.style.height=j+"px",$original_item.append(f)});var p=$new_item.find("img").attr("src");k.forEach(function(a,b){var f=document.createElement("div");f.className=e+"new-part ",f.className+="new-part-no-"+b,f.style.cssText="background:url('"+p+"'); top:"+a.y+"px; left:"+a.x+"px;",f.style.backgroundPosition=a.x+"px "+a.y+"px",f.style.backgroundSize=d+"px "+c+"px",f.style.width=i+"px",f.style.height=j+"px",0===b?(f.classList.add(e+"new-part-page1-ani-before"),f.classList.add("border-tl"),f.classList.add("border-bl")):(f.classList.add(e+"new-part-page2-ani-before"),f.classList.add("border-tr"),f.classList.add("border-br")),$original_item.append(f)}),setTimeout(function(){$(".old-part-no-0",$slider).addClass(e+"old-part-page1-ani-after"),$(".old-part-no-1",$slider).addClass(e+"old-part-page2-ani-after"),$(".new-part-no-0",$slider).addClass(e+"new-part-page1-ani-after"),$(".new-part-no-1",$slider).addClass(e+"new-part-page2-ani-after"),console.log("doing animation");var c=0;$original_item.one(transitionEvent,function(d){++c,$(this).empty(),$(this).append("<img src='"+o+"' alt='' />"),a.animating_state=!1,"prev"==a.direction&&(update_index_for_prev(a,b),show_current_item_only(a,b),apply_new_navigation_classes(a,b)),"next"==a.direction&&(update_index_for_next(a,b),show_current_item_only(a,b),apply_new_navigation_classes(a,b)),"controls"==a.direction&&(show_current_item_only(a,b),apply_new_navigation_classes(a,b))})},300)},split:function(a,b){$slider=b.parent();var c=$slider.outerHeight(),d=$slider.outerWidth();$split_offset=50,console.log("entering split"),a.animating_state=!0;for(var e=a.effect+"-",f=b.eq(a.prev_index),g=b.eq(a.current_index),h=b.eq(a.next_index),i=d/2,j=c/2,k={},l=0;l<2;l++)for(var m=0;m<2;m++){var n={};n.y=l*j,n.x=m*i,n.matrix_code=l+1+""+(m+1);var o=n.matrix_code;k[o]=n}!function(a){Object.keys(a).forEach(function(b,c){switch(a[b].matrix_code){case"11":a[b].x_target=a[b].x-$split_offset,a[b].y_target=a[b].y-$split_offset;break;case"12":a[b].x_target=a[b].x+$split_offset,a[b].y_target=a[b].y-$split_offset;break;case"21":a[b].x_target=a[b].x-$split_offset,a[b].y_target=a[b].y+$split_offset;break;case"22":a[b].x_target=a[b].x+$split_offset,a[b].y_target=a[b].y+$split_offset}})}(k),"next"==a.direction&&($original_item=g,$new_item=h),"prev"==a.direction&&($original_item=g,$new_item=f),"controls"==a.direction&&($original_item=b.eq(a.old_index),$new_item=b.eq(a.current_index));var p=$original_item.find("img").attr("src"),q=$new_item.find("img").attr("src");$original_item.empty(),$original_item.append("<img src='"+q+"' alt='' />"),Object.keys(k).forEach(function(a,b){var f=document.createElement("div");switch(f.className=e+"old-part",b){case 0:f.classList.add("border-tl");break;case 1:f.classList.add("border-tr");break;case 2:f.classList.add("border-bl");break;case 3:f.classList.add("border-br")}f.style.cssText="background:url('"+p+"'); top:"+k[a].y+"px; left:"+k[a].x+"px;",f.style.backgroundPosition=k[a].x+"px "+k[a].y+"px",f.style.backgroundSize=d+"px "+c+"px",f.style.width=i+"px",f.style.height=j+"px",f.id="j-"+k[a].matrix_code,$original_item.append(f)}),Object.keys(k).forEach(function(c,d){$("#j-"+k[c].matrix_code).animate({top:k[c].y_target,left:k[c].x_target,opacity:0},a.duration,function(){d==Object.keys(k).length-1&&(console.log("final end"),$original_item.empty(),$original_item.append("<img src='"+p+"' alt='' />"),a.animating_state=!1,"prev"==a.direction&&(update_index_for_prev(a,b),show_current_item_only(a,b),apply_new_navigation_classes(a,b)),"next"==a.direction&&(update_index_for_next(a,b),show_current_item_only(a,b),apply_new_navigation_classes(a,b)),"controls"==a.direction&&(show_current_item_only(a,b),apply_new_navigation_classes(a,b)))})})},split_fold:function(a,b){$slider=b.parent();var c=$slider.outerHeight(),d=$slider.outerWidth();console.log("entering split"),a.animating_state=!0;for(var e=a.effect+"-",f=b.eq(a.prev_index),g=b.eq(a.current_index),h=b.eq(a.next_index),i=d/2,j=c/2,k={},l=0;l<2;l++)for(var m=0;m<2;m++){var n={};n.y=l*j,n.x=m*i,n.matrix_code=l+1+""+(m+1);var o=n.matrix_code;k[o]=n}"next"==a.direction&&($original_item=g,$new_item=h),"prev"==a.direction&&($original_item=g,$new_item=f),"controls"==a.direction&&($original_item=b.eq(a.old_index),$new_item=b.eq(a.current_index));var p=$original_item.find("img").attr("src"),q=$new_item.find("img").attr("src");$original_item.empty(),$original_item.append("<img src='"+q+"' alt='' />"),Object.keys(k).forEach(function(a,b){var f=document.createElement("div");switch(f.className=e+"old-part",b){case 0:f.classList.add("border-tl");break;case 1:f.classList.add("border-tr");break;case 2:f.classList.add("border-bl");break;case 3:f.classList.add("border-br")}f.style.cssText="background:url('"+p+"'); top:"+k[a].y+"px; left:"+k[a].x+"px;",f.style.backgroundPosition=k[a].x+"px "+k[a].y+"px",f.style.backgroundSize=d+"px "+c+"px",f.style.width=i+"px",f.style.height=j+"px",f.id="j-"+k[a].matrix_code,$original_item.append(f)}),setTimeout(function(){Object.keys(k).forEach(function(a,b){$("#j-"+k[a].matrix_code).addClass(e+"old-part-"+k[a].matrix_code+"-ani-after")}),$original_item.one(transitionEvent,function(c){console.log("final end"),$original_item.empty(),$original_item.append("<img src='"+p+"' alt='' />"),a.animating_state=!1,"prev"==a.direction&&(update_index_for_prev(a,b),show_current_item_only(a,b),apply_new_navigation_classes(a,b)),"next"==a.direction&&(update_index_for_next(a,b),show_current_item_only(a,b),apply_new_navigation_classes(a,b)),"controls"==a.direction&&(show_current_item_only(a,b),apply_new_navigation_classes(a,b))})},300)},split_fold_outward:function(a,b){$slider=b.parent();var c=$slider.outerHeight(),d=$slider.outerWidth();console.log("entering split"),a.animating_state=!0;for(var e=a.effect+"-",f=b.eq(a.prev_index),g=b.eq(a.current_index),h=b.eq(a.next_index),i=d/2,j=c/2,k={},l=0;l<2;l++)for(var m=0;m<2;m++){var n={};n.y=l*j,n.x=m*i,n.matrix_code=l+1+""+(m+1);var o=n.matrix_code;k[o]=n}"next"==a.direction&&($original_item=g,$new_item=h),"prev"==a.direction&&($original_item=g,$new_item=f),"controls"==a.direction&&($original_item=b.eq(a.old_index),$new_item=b.eq(a.current_index));var p=$original_item.find("img").attr("src"),q=$new_item.find("img").attr("src");$original_item.empty(),$original_item.append("<img src='"+q+"' alt='' />"),Object.keys(k).forEach(function(a,b){var f=document.createElement("div");switch(f.className=e+"old-part",b){case 0:f.classList.add("border-tl");break;case 1:f.classList.add("border-tr");break;case 2:f.classList.add("border-bl");break;case 3:f.classList.add("border-br")}f.style.cssText="background:url('"+p+"'); top:"+k[a].y+"px; left:"+k[a].x+"px;",f.style.backgroundPosition=k[a].x+"px "+k[a].y+"px",f.style.backgroundSize=d+"px "+c+"px",f.style.width=i+"px",f.style.height=j+"px",f.id="j-"+k[a].matrix_code,$original_item.append(f)}),setTimeout(function(){Object.keys(k).forEach(function(a,b){$("#j-"+k[a].matrix_code).addClass(e+"old-part-"+k[a].matrix_code+"-ani-after")}),$original_item.one(transitionEvent,function(c){console.log("final end"),$original_item.empty(),$original_item.append("<img src='"+p+"' alt='' />"),a.animating_state=!1,"prev"==a.direction&&(update_index_for_prev(a,b),show_current_item_only(a,b),apply_new_navigation_classes(a,b)),"next"==a.direction&&(update_index_for_next(a,b),show_current_item_only(a,b),apply_new_navigation_classes(a,b)),"controls"==a.direction&&(show_current_item_only(a,b),apply_new_navigation_classes(a,b))})},300)},split_fold_scale:function(a,b){$slider=b.parent();var c=$slider.outerHeight(),d=$slider.outerWidth();console.log("entering split"),a.animating_state=!0;for(var e=a.effect+"-",f=b.eq(a.prev_index),g=b.eq(a.current_index),h=b.eq(a.next_index),i=d/2,j=c/2,k={},l=0;l<2;l++)for(var m=0;m<2;m++){var n={};n.y=l*j,n.x=m*i,n.matrix_code=l+1+""+(m+1);var o=n.matrix_code;k[o]=n}"next"==a.direction&&($original_item=g,$new_item=h),"prev"==a.direction&&($original_item=g,$new_item=f),"controls"==a.direction&&($original_item=b.eq(a.old_index),$new_item=b.eq(a.current_index));var p=$original_item.find("img").attr("src"),q=$new_item.find("img").attr("src");$original_item.empty(),$original_item.append("<img src='"+q+"' alt='' />"),Object.keys(k).forEach(function(a,b){var f=document.createElement("div");switch(f.className=e+"old-part",b){case 0:f.classList.add("border-tl");break;case 1:f.classList.add("border-tr");break;case 2:f.classList.add("border-bl");break;case 3:f.classList.add("border-br")}f.style.cssText="background:url('"+p+"'); top:"+k[a].y+"px; left:"+k[a].x+"px;",f.style.backgroundPosition=k[a].x+"px "+k[a].y+"px",f.style.backgroundSize=d+"px "+c+"px",f.style.width=i+"px",f.style.height=j+"px",f.id="j-"+k[a].matrix_code,$original_item.append(f)}),setTimeout(function(){Object.keys(k).forEach(function(a,b){$("#j-"+k[a].matrix_code).addClass(e+"old-part-"+k[a].matrix_code+"-ani-after")}),$original_item.one(transitionEvent,function(c){console.log("final end"),$original_item.empty(),$original_item.append("<img src='"+p+"' alt='' />"),a.animating_state=!1,"prev"==a.direction&&(update_index_for_prev(a,b),show_current_item_only(a,b),apply_new_navigation_classes(a,b)),"next"==a.direction&&(update_index_for_next(a,b),show_current_item_only(a,b),apply_new_navigation_classes(a,b)),"controls"==a.direction&&(show_current_item_only(a,b),apply_new_navigation_classes(a,b))})},300)}};